<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Loadingâ€¦</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<script>
/*
  Clean-URL loader:
  Visiting /portfolio/ will load /portfolio.html but keep /portfolio/ in the bar.
  Put this file at /404.html in your repo root.
*/
(function () {
  // normalize path (e.g., "/portfolio" -> "/portfolio/")
  var path = location.pathname.replace(/\/+$/, "/");
  // last segment -> slug; "/" => "index"
  var parts = path.split("/").filter(Boolean);
  var slug = parts.length ? parts[parts.length - 1] : "index";
  var target = "/" + slug + ".html";

  fetch(target, { cache: "no-store" })
    .then(function (r) { if (!r.ok) throw new Error("missing"); return r.text(); })
    .then(function (html) {
      // Parse fetched page
      var parser = new DOMParser();
      var doc = parser.parseFromString(html, "text/html");

      // Ensure relative asset paths work at clean URLs
      var base = doc.createElement("base");
      base.setAttribute("href", "/");
      doc.head.prepend(base);

      // Swap in the fetched document, keeping the clean URL
      document.open();
      document.write("<!DOCTYPE html>" + doc.documentElement.outerHTML);
      document.close();
    })
    .catch(function () {
      document.body.innerHTML =
        "<h1>Not found</h1><p>That page does not exist.</p>";
    });
})();
</script>
</body>
</html>
